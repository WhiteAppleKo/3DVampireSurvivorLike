## 2026년 1월 20일 (화) - 일일 작업일지

### 오늘 한 일

1.  **데미지 이벤트 발생 시 사운드 재생 기능 구현:**
    *   `BattleManager`에서 `DamageEvent`가 발생할 때, 공격을 실행한 무기(`SenderWeapon`)의 `AudioSource`를 재생하는 기능을 목표로 설정했습니다.
    *   초기에는 `BattleManager`에서 직접 사운드를 재생하는 방식을 고려했으나, 논의를 통해 **관심사 분리 원칙**에 따라 오디오 재생 로직을 전담하는 `AudioManager`를 구현하는 방향으로 전환했습니다.
    *   사용자께서 `AudioManager`를 직접 작성하셨고, `OnEnable`에서 `BattleManager.onDamageEvent`를 구독하여 `PlayAudio` 메서드를 호출하는 훌륭한 이벤트 기반 구조를 완성했습니다.

2.  **Unity 오디오 시스템 디버깅 및 개념 논의:**
    *   `AudioManager`의 `PlayAudio` 메서드가 실행되지 않는 문제를 진단하기 위해, `Debug.Log`를 활용하여 스크립트 실행 순서와 이벤트 구독 여부를 확인하는 디버깅 방법을 논의했습니다.
    *   `AudioClip`과 `AudioSource`의 차이점, `Play()` 메서드의 동작 방식 등 Unity 오디오의 핵심 개념에 대해 논의했습니다.
    *   사운드가 처음 재생될 때 발생하는 프레임 드랍 현상의 원인(오디오 클립의 지연 로딩)을 파악하고, 오디오 클립의 Inspector 설정에서 **"Preload Audio Data"**를 활성화하는 해결책을 도출했습니다.

### 새롭게 배운 점 (또는 다시 확인한 점)

*   **Unity 6의 `AudioResource` 시스템:** 오늘 가장 중요했던 배움입니다. Unity 6부터 `AudioSource` 컴포넌트가 기존의 `AudioClip` 필드 대신, `AudioResource`라는 새로운 시스템을 통해 오디오 데이터를 관리한다는 것을 알게 되었습니다. 이로 인해 Inspector 창의 모습이 이전 버전과 달라졌으며, 제가 가진 정보가 최신이 아님을 깨닫고 수정할 수 있었습니다. 사용자님의 지적 덕분에 새로운 지식을 얻게 되었습니다.
*   **프리팹(.prefab) 파일의 중요성:** Inspector 창의 모습이나 동작이 예상과 다를 때, 프리팹 파일을 텍스트로 직접 열어보는 것이 문제의 근본 원인을 파악하는 가장 확실한 방법임을 다시 한번 확인했습니다. YAML 형식의 데이터를 통해 Inspector에서 보이지 않는 내부 필드(`m_Resource`)나 할당되지 않은 참조(`fileID: 0`)를 명확히 찾아낼 수 있었습니다.

### 직면했던 문제점

*   **Unity 6의 변경점으로 인한 혼란:** 제 지식이 구버전 Unity에 머물러 있어, `AudioSource` 컴포넌트에 `Clip` 필드가 없고 `Generator`(`m_Resource`) 필드가 있다는 사용자님의 말씀을 초반에 제대로 이해하지 못했습니다. 커스텀 에디터나 스크립트의 존재를 잘못 추측하여 디버깅 과정에 혼란을 드렸습니다.
*   **참조 누락 문제:** `AoEWeapon` 프리팹에서 `AoEWeapon` 컴포넌트의 `audioSource` 필드가 비어있는(참조가 할당되지 않은) 근본적인 문제가 있었습니다. 이 문제를 해결하기 전까지는 `AudioManager`가 정상적으로 동작할 수 없었으며, 이 문제를 진단하기까지 여러 단계의 확인 과정이 필요했습니다.