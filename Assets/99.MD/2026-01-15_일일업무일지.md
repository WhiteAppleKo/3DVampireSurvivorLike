### **2026년 1월 15일 목요일 일일 업무 문서**

**1. 오늘 한 일**

*   **`OverflowException: TimeSpan overflowed` 문제 분석:**
    *   `AutoAttack.cs`의 `Async_AutoAttack` 메서드 내 `weapon.FinalStats.attackDelay` 값이 비정상적으로 커서 발생하는 문제였습니다.
    *   `Weapon.cs`의 `RecalculateStats` 메서드에서 `m_GlobalAugmentsModifier.percentAttackDelay`가 `0`인 상태로 나누기 연산(`FinalStats.attackDelay / m_GlobalAugmentsModifier.percentAttackDelay`)이 수행되어 `PositiveInfinity`가 발생함을 확인했습니다.
    *   `WeaponBaseStats.WeaponModifier`가 `struct`인데, `WeaponAbility.Apply` 메서드에서 `ref` 키워드 없이 파라미터로 전달되어 원본 `m_GlobalModifier`가 수정되지 않던 문제(글로벌 증강 미적용)를 발견했습니다. 이는 직접적인 `OverflowException`의 원인은 아니었지만, 스탯 계산 로직의 오류였습니다.

*   **`AutoAttack` 저장 문제 분석:**
    *   `AutoAttack.SaveData()`가 첫 저장은 성공하나, 두 번째 저장부터 `AutoAttack` 부분만 비어있는 상태로 저장되는 문제에 대해 분석했습니다.
    *   `SaveManager`의 `ISaveable` 등록 여부, `GameSaveData` 및 하위 데이터 클래스의 직렬화 설정 등을 확인했습니다.
    *   최종적으로 사용자의 도움을 통해 **`AutoAttack` 컴포넌트가 플레이어뿐만 아니라 `Enemy`에게도 사용되고 있었음**이 문제의 원인임을 파악했습니다.

**2. 작업 과정에서 새롭게 배운 점**

*   **복합적인 버그 원인 파악의 중요성:** 하나의 증상(`OverflowException`, 저장 누락)이 여러 개의 숨겨진 로직 오류(struct 복사 문제, `ISaveable` 등록 오류, 중복 컴포넌트 사용)에서 비롯될 수 있음을 다시 한번 깨달았습니다.
*   **`struct`의 값 전달 특성:** `struct`를 메서드 파라미터로 넘길 때 `ref` 키워드 없이 전달하면 복사본이 전달되므로, 원본을 수정하려면 `ref`를 사용해야 함을 다시 상기했습니다. 이로 인해 글로벌 증강이 실제 스탯에 적용되지 않고 있었습니다.
*   **컴포넌트의 다중 사용 위험성:** 동일한 로직을 가진 컴포넌트(`AutoAttack`)가 게임 내 여러 객체(플레이어, 적)에 사용될 경우, `SaveManager`와 같은 중앙 집중식 시스템에서는 어떤 인스턴스의 데이터가 처리되는지 명확히 제어하지 않으면 문제가 발생할 수 있습니다. `ISaveable`의 `RegistSaveAble` 로직으로는 이러한 다중 인스턴스를 관리하기 어렵습니다.
*   **`JsonUtility`의 직렬화 동작:** `JsonUtility`는 `[Serializable]` 속성과 `public` 필드를 기반으로 동작하며, 필드가 `null`이거나 컬렉션이 비어있으면 JSON에서 해당 필드를 생략할 수 있습니다. 또한 순환 참조 발생 시 해당 필드를 조용히 직렬화하지 않는 특성이 있습니다.
*   **디버깅의 중요성:** 코드를 통한 추적만으로는 한계가 있으며, 실제 런타임 시점의 객체 상태를 디버그 로그로 직접 확인하는 것이 문제 해결의 가장 빠르고 정확한 방법임을 다시 한번 절감했습니다.

**3. 작업 과정에서 직면했던 문제점**

*   **잘못된 가설 설정 및 분석 시간 낭비:** 사용자의 문제 설명(`O키 두 번 클릭 후 두 번째 저장부터 문제 발생`)을 제가 정확히 이해하지 못하고, 코드만으로 설명되지 않는 상황에 대해 계속해서 새로운 가설을 세우고 잘못된 방향으로 분석하여 불필요하게 많은 시간을 소비했습니다.
*   **Unity 생명주기 및 인스턴스 관리의 복잡성:** `AutoAttack` 컴포넌트가 플레이어 외의 다른 객체(Enemy)에도 부착되어 있을 가능성을 초기에 고려하지 못해 문제의 핵심을 파악하는 데 어려움을 겪었습니다.
*   **사용자와의 의사소통 미숙:** 사용자의 명확한 피드백에도 불구하고, 저의 분석에 대한 확신으로 인해 사용자의 불필요한 좌절감을 유발했습니다. 앞으로는 사용자의 말씀에 더욱 귀 기울이고, 제 분석이 막힐 때는 반드시 사용자께 도움을 요청하여 올바른 방향으로 나아가겠습니다.