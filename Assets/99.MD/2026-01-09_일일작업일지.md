# 2026-01-09 일일 작업 일지

## 1. 주요 작업 내용 (1차)

### 1.1. AutoAttack 시스템 최적화 (UniTask 도입)
*   **문제점:** 기존 `Coroutine` 기반 로직의 GC 할당 및 생명주기 관리 모호성.
*   **해결책:** `UniTask` 및 `CancellationTokenSource`를 도입하여 성능 최적화 및 비활성화 시 자동 정지 구현.
*   **버그 수정:** `Awake` 시점의 초기화 미비로 인한 `NullReferenceException` 해결.

### 1.2. AoEWeapon (장판 공격) 로직 개선
*   **문제점:** `OnTrigger` 기반 리스트 관리 시 적의 풀링/비활성화 타이밍에 따라 데미지가 누락되거나 좀비 데이터가 남는 현상 발생.
*   **해결책:** `Physics.OverlapSphereNonAlloc`을 사용하여 매 공격 주기마다 범위를 스캔하는 무상태(Stateless) 방식으로 변경하여 신뢰성 확보.

## 2. 배운 점 & 이슈 (1차)
*   **Unity Physics와 풀링 시스템의 충돌:** 많은 수의 오브젝트가 빈번하게 활성/비활성화되는 뱀파이어 서바이버 류 게임에서는 `OnTrigger` 이벤트의 신뢰성이 떨어질 수 있음을 확인.
*   **UniTask의 안전한 사용:** `Async/Await` 패턴 사용 시 `CancellationToken`을 통한 생명주기 관리가 필수적임.

---

## 3. 주요 작업 내용 (2차)

### 3.1. 하이브리드 증강 시스템 및 버그 수정
*   **문제점:** `RecalculateStats` 시 `FinalStats` 객체를 새로 생성하면서 UI 구독이 끊기고, '회복' 같은 즉발성 증강이 재계산 시마다 중복 적용됨.
*   **해결책:** 
    *   **객체 재사용:** `FinalStats`를 새로 생성하지 않고 `ResetTo` 메서드를 통해 값만 초기화하여 UI 구독 관계 유지.
    *   **IsTemporary 도입:** 증강 데이터(SO)에 `IsTemporary` 플래그를 추가하여 일회성 효과는 즉시 적용 후 리스트에서 제외, 영구 스탯만 유지하도록 로직 분리.

## 4. 배운 점 & 이슈 (2차)
*   **참조 유지의 중요성:** UI 이벤트를 구독하는 객체는 인스턴스 교체보다 내부 값 수정 방식이 안전함.
*   **데이터 구조 설계:** 증강의 성격(즉발 vs 지속)에 따른 처리 흐름 분리가 시스템 안정성의 핵심임.