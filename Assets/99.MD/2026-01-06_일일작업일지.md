# 2026-01-06 일일 작업 일지

## 1. 작업 개요
*   **작업 일자**: 2026년 1월 6일
*   **작업 목표**: UI 시스템(경험치 바, 선택지 스크롤) 개선 및 증강 적용 시스템 버그 수정
*   **진행 상태**: 완료

## 2. 상세 작업 내용

### 2.1 UI 시스템 개선 (IMEXPPanel)
*   **문제점**: 해상도 변경(1080x1920 ↔ 1920x1080) 시 UI 요소들이 과하게 커지거나 비율이 깨지는 현상 발생. 또한 경험치 바가 영역을 벗어나는 문제 확인.
*   **해결**:
    *   하드코딩된 픽셀 수치(`240`, `4f` 등)를 **화면 높이(`rect.height`)에 비례한 상대적 수치**로 변경하여 해상도 대응력을 확보.
    *   `ChangeExpValue` 메서드에 `Mathf.Clamp01`을 적용하여 경험치 비율이 0~1 범위를 벗어나지 않도록 제한.

### 2.2 스크롤 아이템 스케일러 최적화 (ScrollItemScaler)
*   **기능 구현**: 스크롤 시 화면 중앙에 위치한 아이템만 커지도록 하는 로직 구현.
*   **최적화**:
    *   `foreach` 루프를 인덱스 기반 `for` 루프로 변경하여 가비지(GC) 생성 방지.
    *   `GetWorldCorners` 및 `InverseTransformPoint`를 활용하여 **세로(Y축) 스크롤** 기준의 정확한 중앙 거리 계산 로직 적용.
    *   가장 중앙에 가까운 아이템을 `selectedItem`으로 자동 갱신하는 기능 추가.

### 2.3 버그 수정 및 안정화
*   **NullReferenceException 해결**: `BindImageText.cs`에서 UI용 텍스트 컴포넌트(`TextMeshProUGUI`) 대신 3D용(`TextMeshPro`)을 참조하던 문제 수정.
*   **컴파일 경고 해결**: `ChoiceSystem.cs` 내의 도달할 수 없는 코드(`unreachable code`)인 불필요한 `break` 문 제거.

### 2.4 증강 시스템 트러블슈팅 (ChoiceApplySystem)
*   **증상**: 증강 선택 시 로그상으로는 적용된 것처럼 보이나 실제 스탯(`MaxHp`) 변화가 없음.
*   **분석 과정**:
    1.  `Controller`와 `ChoiceApplySystem` 간의 객체 참조 ID 확인 -> 정상 연결됨.
    2.  `AddAugment` 호출 로그 확인 -> 호출은 되나 값이 변하지 않음.
    3.  `StatAbility.Apply` 로직 및 `ClampInt` 동작 검증.
*   **원인 규명**: 코드 로직 문제가 아닌, **CSV 데이터 파싱 과정에서 `StatType`이 잘못 매핑**되어 `MaxHp` 케이스로 진입하지 못하는 문제였음을 확인. (데이터 파싱 수정으로 해결)

## 3. 작업 중 직면한 이슈 및 교훈
*   **디버깅의 중요성**: `Debug.Log`를 활용해 객체 ID와 실제 넘어오는 데이터 값을 단계별로 확인하는 과정이 문제 해결의 열쇠가 됨.
*   **데이터 검증**: 로직이 완벽해 보여도 외부 데이터(CSV)의 **타입 파싱(Enum Parsing)**이 잘못되면 기능이 동작하지 않음을 재확인.

## 4. 추후 계획
*   증강 적용 시스템의 예외 처리 강화 (잘못된 데이터 타입 방지).
*   CSV 데이터 파싱 로직 안정화.
